<!DOCTYPE html>
<html lang="en"> <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-i18n="appTitle">Gemini Subtitle Translator</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    /* Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ ØªÙ… Ø±ÙˆØ´Ù† (Ù¾ÛŒØ´â€ŒÙØ±Ø¶) */
    body {
      --body-bg: #f3f4f6; /* Tailwind gray-100 */
      --text-color-primary: #1f2937; /* Tailwind gray-800 */
      --container-bg: #ffffff; /* white */
      --input-bg: #f9fafb; /* Tailwind gray-50 */
      --input-border: #d1d5db; /* Tailwind gray-300 */
      --input-text: #111827; /* Tailwind gray-900 */
      --button-bg: #3b82f6; /* Tailwind blue-500 */
      --button-text: #ffffff;
      --button-hover-bg: #2563eb; /* Tailwind blue-600 */
      --select-bg: #e5e7eb; /* Tailwind gray-200 */
      --select-text: #111827; /* Tailwind gray-900 */
      --select-border: #9ca3af; /* Tailwind gray-400 */
      --theme-toggle-icon-color: #4b5563; /* Tailwind gray-600 for light theme icon */
      transition: background-color 0.3s, color 0.3s;
    }

    /* Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ ØªÙ… ØªØ§Ø±ÛŒÚ© Ø´Ù…Ø§ */
    body.dark-theme {
      --body-bg: #0d1117;
      --text-color-primary: #c9d1d9;
      --container-bg: #161b22;
      --input-bg: #374151; /* Tailwind gray-700 (example) */
      --input-border: #4b5563; /* Tailwind gray-600 (example) */
      --input-text: #f3f4f6; /* Tailwind gray-100 (example) */
      --button-bg: #3282b8;
      --button-text: #ffffff;
      --button-hover-bg: #1d4357;
      --select-bg: #374151; /* Tailwind gray-800 (example) */
      --select-text: #f3f4f6; /* Tailwind gray-100 (example) */
      --select-border: #6b7280; /* Tailwind gray-600 (example) */
      --theme-toggle-icon-color: #9ca3af; /* Tailwind gray-400 for dark theme icon */
      /* Ø³Ø§ÛŒØ± Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø´Ù…Ø§ Ù…Ø§Ù†Ù†Ø¯ --grid-bg Ùˆ ØºÛŒØ±Ù‡ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯ Ø§Ú¯Ø± Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø¯Ø± Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆÙ†Ø¯ */
    }

    /* Ø§Ø¹Ù…Ø§Ù„ Ù…ØªØºÛŒØ±Ù‡Ø§ Ø¨Ù‡ Ø¹Ù†Ø§ØµØ± Ø§ØµÙ„ÛŒ - Ø´Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§ÛŒÙ† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ú¯Ø³ØªØ±Ø´ Ø¯Ù‡ÛŒØ¯ */
    body {
      background-color: var(--body-bg);
      color: var(--text-color-primary);
    }
    #formContainer, 
    #responseContainer > div /* #response div */ {
      background-color: var(--container-bg);
      /* Tailwind shadow-xl Ùˆ rounded-2xl Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ */
    }
    input[type="password"], input[type="text"], textarea, select {
      background-color: var(--input-bg);
      border-color: var(--input-border);
      color: var(--input-text);
    }
    /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ ØªØ±Ø¬Ù…Ù‡ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ */
    #sendBtn, #downloadBtn {
       background-color: var(--button-bg) !important; /* Important to override Tailwind potentially */
       color: var(--button-text) !important;
    }
     #sendBtn:hover, #downloadBtn:hover {
       background-color: var(--button-hover-bg) !important;
    }
    /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ select Ù‡Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…ØªØºÛŒØ±Ù‡Ø§ */
    select#lang, select#model, select#tone, select#langTarget {
        background-color: var(--select-bg);
        color: var(--select-text);
        border-color: var(--select-border);
    }


    .theme-toggle-button {
      background: none;
      border: none;
      color: var(--theme-toggle-icon-color); /* Use CSS variable for icon color */
      cursor: pointer;
      font-size: 1.5rem;
      padding: 0.5rem;
      line-height: 1;
      opacity: 0.7;
    }
    .theme-toggle-button:hover {
      opacity: 1;
    }
    .sun-icon { display: inline; }
    .moon-icon { display: none; }
    body.dark-theme .sun-icon { display: none; }
    body.dark-theme .moon-icon { display: inline; }
  </style>
  <script defer src="script.js?v=final_v4"></script>
</head>
<body> <div class="max-w-2xl mx-auto">
    <div class="text-right mb-4">
      <select id="lang"> <option value="en">English (en)</option>
        <option value="fa">ÙØ§Ø±Ø³ÛŒ (fa)</option>
      </select>
    </div>

    <div id="formContainer" class="p-6 rounded-2xl shadow-xl">
      <div class="flex justify-between items-center mb-4">
        <h1 id="appTitleH1" class="text-2xl font-bold" data-i18n="appTitleH1">Gemini Subtitle Translator</h1>
        <button id="themeToggleBtn" class="theme-toggle-button" aria-label="Toggle theme">
          <span class="sun-icon">â˜€ï¸</span>
          <span class="moon-icon">ğŸŒ™</span>
        </button>
      </div>

      <label for="apiKey" class="block mb-2 text-sm font-medium" data-i18n="apiKeyLabel">Gemini API Key:</label>
      <input id="apiKey" type="password" class="w-full p-2 mb-4 rounded border" data-i18n-placeholder="apiKeyPlaceholder" placeholder="Paste your Gemini API Key" />
      
      <label for="model" class="block mb-2 text-sm font-medium" data-i18n="modelLabel">Model:</label>
      <select id="model" class="w-full p-2 mb-4 rounded border">
        <option value="gemini-1.5-flash-latest">ğŸ”µ Gemini 1.5 Flash (Latest)</option>
        <option value="gemini-1.5-pro-latest">ğŸŸ¢ Gemini 1.5 Pro (Latest)</option>
        <option value="gemini-1.0-pro">ğŸŸ¢ Gemini 1.0 Pro</option> 
        </select>
      <p class="text-xs text-gray-500 dark:text-gray-400 mb-3" data-i18n="modelInfo">
         </p>

      <label for="tone" class="block mb-2 text-sm font-medium" data-i18n="toneLabel">Tone:</label>
      <select id="tone" class="w-full p-2 mb-4 rounded border">
      </select>

      <label for="langTarget" class="block mb-2 text-sm font-medium" data-i18n="langTargetLabel">Target language:</label>
      <select id="langTarget" class="w-full mb-4 p-2 rounded border">
        <option value="en">English (en)</option>
        <option value="fa">ÙØ§Ø±Ø³ÛŒ (fa)</option>
        <option value="es">EspaÃ±ol (es)</option>
        <option value="fr">FranÃ§ais (fr)</option>
        <option value="de">Deutsch (de)</option>
        <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹ (ru)</option>
        <option value="zh">ä¸­æ–‡ (zh)</option>
        <option value="ja">æ—¥æœ¬èª (ja)</option>
        <option value="ko">í•œêµ­ì–´ (ko)</option>
        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (ar)</option>
        <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€ (hi)</option>
        <option value="tr">TÃ¼rkÃ§e (tr)</option>
        <option value="pt">PortuguÃªs (pt)</option>
        <option value="it">Italiano (it)</option>
      </select>
      
      <label id="fileInputLabel" for="fileInput" class="block mb-2 text-sm font-medium" data-i18n="fileChooseLabel">Choose .srt file:</label>
      <input id="fileInput" type="file" accept=".srt" class="mb-1 w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-md file:border file:border-gray-300 dark:file:border-gray-600 file:text-sm file:font-medium file:bg-gray-50 dark:file:bg-gray-700 file:text-gray-700 dark:file:text-gray-200 hover:file:bg-gray-100 dark:hover:file:bg-gray-600 cursor-pointer"/>
      <div id="fileNameText" class="text-xs text-gray-500 dark:text-gray-400 mb-4 h-4" data-i18n="fileNone">No file chosen</div>

      <textarea id="prompt" class="w-full h-48 p-2 rounded border" data-i18n-placeholder="promptPlaceholder" placeholder="Paste subtitle text or upload .srt file"></textarea>

      <label for="filenameInput" class="block mb-2 text-sm font-medium" data-i18n="filenameLabel">Output file name:</label>
      <input id="filenameInput" type="text" class="w-full p-2 mb-4 rounded border" data-i18n-placeholder="filenamePlaceholder" placeholder="Enter the subtitle name (e.g., Subtitle.srt)" />
      
      <button id="sendBtn" class="w-full py-2 rounded text-white font-semibold mb-2" data-i18n="translateBtn">Translate</button>
      <button id="downloadBtn" style="display:none" class="w-full py-2 rounded text-white font-semibold" data-i18n="downloadBtn">Download .srt</button>
    </div>

    <div id="responseContainer" class="mt-6" style="display:none;">
      <h2 id="responseTitle" class="text-xl font-semibold mb-2" data-i18n="responseTitle">Translation Result:</h2>
      <div id="response" class="w-full text-sm whitespace-pre-wrap p-4 rounded shadow-md"></div>
    </div>

    <footer class="text-center text-xs text-gray-600 dark:text-gray-500 mt-10">
      <p><span data-i18n="footerMadeWith">Made with</span> â¤ï¸ by <a href="https://github.com/GeekNeuron/SubMovies" class="underline" data-i18n="footerAuthor">GeekNeuron</a></p>
    </footer>
  </div>
</body>
</html>
